<div id="adSetList">
  <div fxLayout="column" [fxLayoutGap]="'20px'">
    <div fxFlexFill fxLayout="row">
      <div class="title" fxFlex="50%">
        <span class="bold"><span> List des Tests de </span> {{name}}</span>
      </div>
      <div fxFlex="50" fxLayoutAlign="end center">
        <button pButton label="CrÃ©er un nouveau test" (click)="show()" icon="pi pi-plus" iconPos="right"></button>
      </div>
    </div>
    <div class="adSetList-list" style="max-width:1820px">

      <p-table #dt
               [value]="adSetList"
               [columns]="cols"
               dataKey="id"
               [rowHover]="true"
               styleClass="p-datatable-gridlines datatable-border"
               [(first)]="first"
               [(rows)]="rows"
               [reorderableColumns]="true"
               [resizableColumns]="true"
               [showCurrentPageReport]="true"
               [rowsPerPageOptions]="[10,25,50]"
               [totalRecords]="totalRecords"
               [paginator]="true"
               stateStorage="local"
               currentPageReportTemplate="{first} - {last} sur {totalRecords}"
               scrollHeight="475px  "
               [scrollable]="true"
      >
        <ng-template pTemplate="caption">
          <div class="table-header">
            List des tests
          </div>
        </ng-template>
        <ng-template pTemplate="header" let-columns>
          <tr>
            <th style="min-width: 80px; max-width: 80px">
              <div class="align-center">
                Active
              </div>
            </th>
            <th *ngFor="let col of columns"
                pReorderableColumn
                pResizableColumn
                style="width: 200px">
              {{col.header}}
            </th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-rowData let-columns="columns">
          <tr class="p-selectable-row" (dblclick)="NavigateIntoListAds(rowData)">
            <td style="min-width: 80px; max-width: 80px">
              <div *ngIf="rowData.status === 'ACTIVE' else unchecked;">
                <p-inputSwitch (onChange)="onChangeStatus(rowData)" [trueValue]="false"></p-inputSwitch>
              </div>
              <ng-template #unchecked>
                <p-inputSwitch (onChange)="onChangeStatus(rowData)" [falseValue]="false"></p-inputSwitch>
              </ng-template>
            </td>
            <ng-container *ngFor="let col of columns">
              <ng-container [ngSwitch]="col.field">
                <td *ngSwitchCase="'created_time'" style="width: 200px">
                  {{rowData[col.field] | date: 'YYYY-MM-dd HH:mm:ss'}}
                </td>
                <td *ngSwitchCase="'status'" style="width: 200px ; justify-content: center">
                  <app-status [value]="rowData[col.field]"></app-status>
                </td>
                <td *ngSwitchCase="'spend'" style="width: 200px">
                  {{rowData[col.field] + ' ' + rowData['currency']}}
                </td>
                <td *ngSwitchCase="'cost_per_results'" style="width: 200px">
                  {{rowData[col.field] + ' ' + rowData['currency']}}
                </td>
                <td *ngSwitchCase="'cpm'" style="width: 200px">
                  {{rowData[col.field] + ' ' + rowData['currency']}}
                </td>
                <td *ngSwitchDefault style="width: 200px">
                  {{rowData[col.field]}}
                </td>
              </ng-container>
            </ng-container>
          </tr>

        </ng-template>
        <ng-template pTemplate="emptymessage">
          <tr>
            <td colspan="8">No customers found.</td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>

</div>
